# in PC
sudo apt install virtualenv

sudo apt-get install mysql-server
sudo mysql_secure_installation
#password is "root"

sudo mysql -u root -p
  show databases;
  create database test1;
  DROP DATABASE test1;
  create database test1 character set utf8 collate utf8_unicode_ci; # none register depend
  exit


virtualenv venv_flask
pip freeze
source venv_flask/bin/activate # to exit write 'deactivate'
pip3 install flask

# in folder app/
	touch {config,app,main,view}.py

pip3 install flask-sqlalchemy mysql-connector

pip3 install flask-migrate

pip3 install flask-script

python3 manage.py db init # in folder...flask_blog/app 

python3 manage.py db migrate # in folder ...flask_blog/app

python3 manage.py db upgrade # in folder ...flask_blog/app

###### in console: python3 -->:
from app import db
from models import Tag
tag=Tag(tagname='python')
db.session.add(tag) # db.session.add_all([tag1,tag2,...])
db.session.commit()

####### instal in v-env: ###

pip3 install wtforms

pip3 install flask-admin

pip3 install flask-security # alternative is "Flask-Bcrypt"

## Editing Models
python3 manage.py db migrate # db is the class db=SQLAlchemy(app)

python3 manage.py db upgrade

##### Create User for administration. in python3 console (from flask-security documentation):


>>> from app import db
>>> from app import user_datastore
>>> user_datastore.create_user(email='shkirmantsev@gmail.com', password='admin')
<User (transient 139638452752168)>
>>> db.session.commit()
>>> from models import User
>>> user=User.query.first()
>>> user
<User 1>
>>> user.id
1
>>> user.email
'shkirmantsev@gmail.com'

>>> user_datastore.create_role(name='admin', description='administrator')
<Role (transient 139638348395016)>
>>> db.session.commit()
>>> from models import Role
>>> role=Role.query.first()
>>> user_datastore.add_role_to_user(user,role)
True
>>> db.session.commit()




